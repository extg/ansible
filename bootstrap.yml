---
# ansible-playbook -i inventory/hosts bootstrap.yml

- hosts: example
  gather_facts: false
  vars:
    locale_list:
      - en_GB.utf8
      - ru_RU.utf8

  pre_tasks:
    - name: install python
      raw: apt-get install python-apt -y

    - name: Setting hostname
      shell: hostname "{{inventory_hostname}}"
      tags: set_hostname

    - name: Generating locales
      shell: locale-gen "{{item}}"
      with_items: "{{locale_list}}"
      tags: generate_locale

  tasks:
    - name: install base utilities
      apt: pkg={{item}}
      with_items:
        - htop
        - tmux
        - tree

    - name: install Zsh
      apt: pkg=zsh

    - name: install Oh My Zsh
      shell: sh -c "$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)"

    - name: create aliases
      shell: alias {{item}}
      with_items:
        - la='ls -la'
        - ll='ls -AlFh'
        - rf='rm -rf'
        - gc='git commit'
        - push='git push origin HEAD'
        - prev='git checkout @{-1}'
        - ..='cd ../'
        - ...='cd ../../'

    - name: Updating apt-get cache
      apt: update_cache=yes cache_valid_time=3600
