---
# ansible-playbook -i inventory/hosts bootstrap.yml

- hosts: example
  gather_facts: false
  vars:
    locale_list:
      - en_GB.utf8
      - ru_RU.utf8

  pre_tasks:
    - name: Installing python
      raw: apt-get install python-apt -y

    - name: Setting hostname
      shell: hostname "{{inventory_hostname}}"
      tags: set_hostname

    - name: Generating locales
      shell: locale-gen "{{item}}"
      with_items: "{{locale_list}}"
      tags: generate_locale

  tasks:
    - name: Installing base utilities
      apt: pkg={{item}}
      with_items:
        - htop
        - tmux
        - tree

    - name: Inslling Zsh
      apt: pkg=zsh

    - name: Inslling Oh My Zsh
      shell: sh -c "$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)"

    - name: Creating aliases
      shell: alias {{item}}
      with_items:
        - la='ls -la'
        - ll='ls -AlFh'
        - rf='rm -rf'
